"use strict";function getRandomColors(){for(var t="0123456789ABCDEF".split(""),e="#",a=0;6>a;a++)e+=t[Math.floor(16*Math.random())];return e}function isNotNull(t){return!!t}function getImgTag(t,e,a){var o=angular.element("<svg></svg>").attr({xmlns:"http://www.w3.org/2000/svg","pointer-events":"none",width:t,height:e}).css({"background-color":a,width:t+"px",height:e+"px"});return o}function getCharacterObject(t,e,a,o,r){var l=angular.element('<text text-anchor="middle"></text>').attr({y:"50%",x:"50%",dy:"0.35em","pointer-events":"auto",fill:e,"font-family":a}).html(t).css({"font-weight":o,"font-size":r+"px"});return l}var nla=angular.module("ngLetterAvatar",[]);nla.constant("defaultSettings",{alphabetcolors:["#5A8770","#B2B7BB","#6FA9AB","#F5AF29","#0088B9","#F18636","#D93A37","#A6B12E","#5C9BBC","#F5888D","#9A89B5","#407887","#9A89B5","#5A8770","#D33F33","#A2B01F","#F0B126","#0087BF","#F18636","#0087BF","#B2B7BB","#72ACAE","#9C8AB4","#5A8770","#EEB424","#407887"],textColor:"#ffffff",defaultBorder:"border:5px solid white",fontsize:30,height:50,width:50,fontWeight:400,charCount:1,fontFamily:"HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica, Arial,Lucida Grande, sans-serif",base:"data:image/svg+xml;base64,",radius:"border-radius:50%;"}),nla.directive("ngLetterAvatar",["defaultSettings",function(t){return{restrict:"AE",replace:!0,scope:{alphabetcolors:"=alphabetcolors",data:"@"},link:function(e,a,o){function r(){o.alphabetcolors&&console.log(l.alphabetcolors.length);var r=e.data.substr(0,l.charCount).toUpperCase(),n=getCharacterObject(r,l.textColor,l.fontFamily,l.fontWeight,l.fontsize),i="",s="";r.charCodeAt(0)<65?s=getRandomColors():(i=Math.floor((r.charCodeAt(0)-65)%l.alphabetcolors.length),s=l.alphabetcolors[i]);var h=getImgTag(l.width,l.height,s);h.append(n);var d,c=angular.element("<div>").append(h.clone()).html(),f=window.btoa(unescape(encodeURIComponent(c))),u=t.base,g="";if(l.avatarBorderStyle?g=l.avatarBorderStyle:l.avatardefaultBorder&&(g=l.defaultBorder),l.shape){if("round"===l.shape){var p=t.radius+g;d="<img src="+u+f+" style='"+p+"' />"}}else d="<img src="+u+f+" style='"+g+"' />";a.empty(),a.append(d)}var l={charCount:isNotNull(o.charcount)?o.charcount:t.charCount,textColor:t.textColor,height:isNotNull(o.height)?o.height:t.height,width:isNotNull(o.width)?o.width:t.width,fontsize:isNotNull(o.fontsize)?o.fontsize:t.fontsize,fontWeight:isNotNull(o.fontweight)?o.fontweight:t.fontWeight,fontFamily:isNotNull(o.fontfamily)?o.fontfamily:t.fontFamily,avatarBorderStyle:o.avatarcustomborder,avatardefaultBorder:o.avatarborder,defaultBorder:t.defaultBorder,shape:o.shape,alphabetcolors:e.alphabetcolors||t.alphabetcolors};e.$watch("data",function(t){r()})}}}]);